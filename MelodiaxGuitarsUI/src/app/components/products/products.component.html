<div class="products">
    <div class="products-header">
        <h2>Products</h2>
        <button mat-raised-button color="primary" (click)="showAddForm()">Add New</button>
    </div>

    <div *ngIf="addProductFlag" class="add-form">
        <h2>Add New Product</h2>
        <form [formGroup]="form" (ngSubmit)="addProduct()">
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Name</mat-label>
                <input matInput formControlName="name">
            </mat-form-field> 
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Description</mat-label>
                <textarea matInput formControlName="description"></textarea>
            </mat-form-field>    
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Brand</mat-label>
                <mat-select formControlName="brandId">
                    <mat-option *ngFor="let brand of brands" [value]="brand.id">{{brand.name}}</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Model</mat-label>
                <input matInput formControlName="model">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Type</mat-label>
                <input matInput formControlName="type">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Hand</mat-label>
                <input matInput formControlName="hand">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Body shape</mat-label>
                <input matInput formControlName="bodyShape">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Color</mat-label>
                <input matInput formControlName="color">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Top</mat-label>
                <input matInput formControlName="top">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Sides and back</mat-label>
                <input matInput formControlName="sidesAndBack">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Neck</mat-label>
                <input matInput formControlName="neck">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Nut</mat-label>
                <input matInput formControlName="nut">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Fingerboard</mat-label>
                <input matInput formControlName="fingerboard">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Strings</mat-label>
                <input matInput formControlName="strings">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Tuners</mat-label>
                <input matInput formControlName="tuners">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Bridge</mat-label>
                <input matInput formControlName="bridge">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Controls</mat-label>
                <input matInput formControlName="controls">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Pickups</mat-label>
                <input matInput formControlName="pickups">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Pickup switch</mat-label>
                <input matInput formControlName="pickupSwitch">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Cutaway</mat-label>
                <mat-select formControlName="cutaway">
                    <mat-option [value]="true">Yes</mat-option>
                    <mat-option [value]="false">No</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Pickguard</mat-label>
                <input matInput formControlName="pickguard">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Case</mat-label>
                <input matInput formControlName="case">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Scale length</mat-label>
                <input matInput formControlName="scaleLength">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Width</mat-label>
                <input matInput formControlName="width">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Depth</mat-label>
                <input matInput formControlName="depth">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Weight</mat-label>
                <input matInput formControlName="weight">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Category</mat-label>
                <mat-select formControlName="categoryId">
                    <mat-option *ngFor="let category of categories" [value]="category.id">{{category.name}}</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Image</mat-label>
                <input matInput formControlName="imageUrl" type="url">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Price</mat-label>
                <input matInput formControlName="price">
            </mat-form-field>
            <div class="button-group">
                <button mat-raised-button color="primary" type="submit">Save</button>
                <button mat-raised-button type="button" (click)="cancelAdd()">Cancel</button>
              </div>
        </form>
    </div>

    <div *ngIf="editProductId" class="add-form">
        <h2>Edit Product</h2>
        <form [formGroup]="form" (ngSubmit)="saveProductChanges()">
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Name</mat-label>
                <input matInput formControlName="name">
            </mat-form-field> 
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Description</mat-label>
                <textarea matInput formControlName="description"></textarea>
            </mat-form-field>    
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Brand</mat-label>
                <mat-select formControlName="brandId">
                    <mat-option *ngFor="let brand of brands" [value]="brand.id">{{brand.name}}</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Model</mat-label>
                <input matInput formControlName="model">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Type</mat-label>
                <input matInput formControlName="type">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Hand</mat-label>
                <input matInput formControlName="hand">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Body shape</mat-label>
                <input matInput formControlName="bodyShape">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Color</mat-label>
                <input matInput formControlName="color">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Top</mat-label>
                <input matInput formControlName="top">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Sides and back</mat-label>
                <input matInput formControlName="sidesAndBack">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Neck</mat-label>
                <input matInput formControlName="neck">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Nut</mat-label>
                <input matInput formControlName="nut">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Fingerboard</mat-label>
                <input matInput formControlName="fingerboard">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Strings</mat-label>
                <input matInput formControlName="strings">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Tuners</mat-label>
                <input matInput formControlName="tuners">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Bridge</mat-label>
                <input matInput formControlName="bridge">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Controls</mat-label>
                <input matInput formControlName="controls">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Pickups</mat-label>
                <input matInput formControlName="pickups">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Pickup switch</mat-label>
                <input matInput formControlName="pickupSwitch">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Cutaway</mat-label>
                <mat-select formControlName="cutaway">
                    <mat-option [value]="true">Yes</mat-option>
                    <mat-option [value]="false">No</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Pickguard</mat-label>
                <input matInput formControlName="pickguard">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Case</mat-label>
                <input matInput formControlName="case">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Scale length</mat-label>
                <input matInput formControlName="scaleLength">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Width</mat-label>
                <input matInput formControlName="width">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Depth</mat-label>
                <input matInput formControlName="depth">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Weight</mat-label>
                <input matInput formControlName="weight">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Category</mat-label>
                <mat-select formControlName="categoryId">
                    <mat-option *ngFor="let category of categories" [value]="category.id">{{category.name}}</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Image</mat-label>
                <input matInput formControlName="imageUrl" type="url">
            </mat-form-field>
            <mat-form-field appearance="outline" class="form-field">
                <mat-label>Price</mat-label>
                <input matInput formControlName="price">
            </mat-form-field>
            <div class="button-group">
                <button mat-raised-button color="primary" type="submit">Save</button>
                <button mat-raised-button type="button" (click)="cancelEdit()">Cancel</button>
              </div>
        </form>
    </div>

    <div class="table-container"> 
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 table">
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef>Id</th>
                <td mat-cell *matCellDef="let product">{{product.id}}</td>
            </ng-container>
    
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef>Name</th>
                <td mat-cell *matCellDef="let product">{{product.name}}</td>
            </ng-container>
    
            <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef>Description</th>
                <td mat-cell *matCellDef="let product">{{product.description}}</td>
            </ng-container>
    
            <ng-container matColumnDef="brandId">
                <th mat-header-cell *matHeaderCellDef>Brand Id</th>
                <td mat-cell *matCellDef="let product">{{product.brandId}}</td>
            </ng-container>
    
            <ng-container matColumnDef="model">
                <th mat-header-cell *matHeaderCellDef>Model</th>
                <td mat-cell *matCellDef="let product">{{product.model}}</td>
            </ng-container>
    
            <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef>Type</th>
                <td mat-cell *matCellDef="let product">{{product.type}}</td>
            </ng-container>
    
            <ng-container matColumnDef="hand">
                <th mat-header-cell *matHeaderCellDef>Hand</th>
                <td mat-cell *matCellDef="let product">{{product.hand}}</td>
            </ng-container>
    
            <ng-container matColumnDef="bodyShape">
                <th mat-header-cell *matHeaderCellDef>Body Shape</th>
                <td mat-cell *matCellDef="let product">{{product.bodyShape}}</td>
            </ng-container>
    
            <ng-container matColumnDef="color">
                <th mat-header-cell *matHeaderCellDef>Color</th>
                <td mat-cell *matCellDef="let product">{{product.color}}</td>
            </ng-container>
    
            <ng-container matColumnDef="top">
                <th mat-header-cell *matHeaderCellDef>Top</th>
                <td mat-cell *matCellDef="let product">{{product.top}}</td>
            </ng-container>
    
            <ng-container matColumnDef="sidesAndBack">
                <th mat-header-cell *matHeaderCellDef>Sides and Back</th>
                <td mat-cell *matCellDef="let product">{{product.sidesAndBack}}</td>
            </ng-container>
    
            <ng-container matColumnDef="neck">
                <th mat-header-cell *matHeaderCellDef>Neck</th>
                <td mat-cell *matCellDef="let product">{{product.neck}}</td>
            </ng-container>
    
            <ng-container matColumnDef="nut">
                <th mat-header-cell *matHeaderCellDef>Nut</th>
                <td mat-cell *matCellDef="let product">{{product.nut}}</td>
            </ng-container>
    
            <ng-container matColumnDef="fingerboard">
                <th mat-header-cell *matHeaderCellDef>Fingerboard</th>
                <td mat-cell *matCellDef="let product">{{product.fingerboard}}</td>
            </ng-container>
    
            <ng-container matColumnDef="strings">
                <th mat-header-cell *matHeaderCellDef>Strings</th>
                <td mat-cell *matCellDef="let product">{{product.strings}}</td>
            </ng-container>
    
            <ng-container matColumnDef="tuners">
                <th mat-header-cell *matHeaderCellDef>Tuners</th>
                <td mat-cell *matCellDef="let product">{{product.tuners}}</td>
            </ng-container>
    
            <ng-container matColumnDef="bridge">
                <th mat-header-cell *matHeaderCellDef>Bridge</th>
                <td mat-cell *matCellDef="let product">{{product.bridge}}</td>
            </ng-container>
    
            <ng-container matColumnDef="controls">
                <th mat-header-cell *matHeaderCellDef>Controls</th>
                <td mat-cell *matCellDef="let product">{{product.controls}}</td>
            </ng-container>
    
            <ng-container matColumnDef="pickups">
                <th mat-header-cell *matHeaderCellDef>Pickups</th>
                <td mat-cell *matCellDef="let product">{{product.pickups}}</td>
            </ng-container>
    
            <ng-container matColumnDef="pickupSwitch">
                <th mat-header-cell *matHeaderCellDef>Pickup Switch</th>
                <td mat-cell *matCellDef="let product">{{product.pickupSwitch}}</td>
            </ng-container>
    
            <ng-container matColumnDef="cutaway">
                <th mat-header-cell *matHeaderCellDef>Cutaway</th>
                <td mat-cell *matCellDef="let product">{{product.cutaway}}</td>
            </ng-container>
    
            <ng-container matColumnDef="pickguard">
                <th mat-header-cell *matHeaderCellDef>Pickguard</th>
                <td mat-cell *matCellDef="let product">{{product.pickguard}}</td>
            </ng-container>
    
            <ng-container matColumnDef="case">
                <th mat-header-cell *matHeaderCellDef>Case</th>
                <td mat-cell *matCellDef="let product">{{product.case}}</td>
            </ng-container>
    
            <ng-container matColumnDef="scaleLength">
                <th mat-header-cell *matHeaderCellDef>Scale Length</th>
                <td mat-cell *matCellDef="let product">{{product.scaleLength}}</td>
            </ng-container>
    
            <ng-container matColumnDef="width">
                <th mat-header-cell *matHeaderCellDef>Width</th>
                <td mat-cell *matCellDef="let product">{{product.width}}</td>
            </ng-container>
    
            <ng-container matColumnDef="depth">
                <th mat-header-cell *matHeaderCellDef>Depth</th>
                <td mat-cell *matCellDef="let product">{{product.depth}}</td>
            </ng-container>
    
            <ng-container matColumnDef="weight">
                <th mat-header-cell *matHeaderCellDef>Weight</th>
                <td mat-cell *matCellDef="let product">{{product.weight}}</td>
            </ng-container>
    
            <ng-container matColumnDef="categoryId">
                <th mat-header-cell *matHeaderCellDef>Category Id</th>
                <td mat-cell *matCellDef="let product">{{product.categoryId}}</td>
            </ng-container>
    
            <ng-container matColumnDef="imageUrl">
                <th mat-header-cell *matHeaderCellDef>Image URL</th>
                <td mat-cell *matCellDef="let product">{{product.imageUrl}}</td>
            </ng-container>

            <ng-container matColumnDef="price">
                <th mat-header-cell *matHeaderCellDef>Price</th>
                <td mat-cell *matCellDef="let product">{{product.price}}</td>
            </ng-container>
    
            <ng-container matColumnDef="actions" class="actions">
                <th mat-header-cell *matHeaderCellDef>Actions</th>
                <td mat-cell *matCellDef="let product">
                  <button mat-icon-button color="primary" (click)="editProduct(product.id)">
                      <mat-icon>edit</mat-icon>
                  </button>
                  <button mat-icon-button color="warn" (click)="deleteProduct(product.id)">
                      <mat-icon>delete</mat-icon>
                  </button>
                </td>
              </ng-container>
        </table>
    </div>
    
</div>